<div class="requests-stats">
  <ion-label class="label-header-grid">
    <ion-icon name="airplane"></ion-icon>
    {{ title }}
  </ion-label>
  <div class="app-card stat-card">
    <span class="stat-value warning">{{ pendingCount }}</span>
    <span class="stat-label">Pendientes</span>
  </div>
</div>

<div class="scroll-container">
  <div class="requests-list">
    <div *ngFor="let item of items" class="request-item">
      <div class="request-glass-card" (click)="handleItemClick(item)">
        <!-- DISEÑO CARD PARA MANAGER (Layout Vertical) -->
        <div class="manager-card-layout" *ngIf="canViewAll">
          <!-- COLUMNA IZQUIERDA: EMPLEADO -->
          <div class="col-worker-info">
            <ion-avatar class="user-avatar-small">
              <img src="https://ionicframework.com/docs/img/demos/avatar.svg" />
            </ion-avatar>
            <div class="worker-text">
              <h3 class="user-name-small">{{ getWorkerName(item) }}</h3>
              <span class="user-id-small">ID: {{ item.idWorker }}</span>
              <ion-chip slot="end" [ngClass]="{
                'status-pending': item.status === 'Pendiente',
                'status-accepted': item.status === 'Aprobada' || item.status === 'Aceptada',
                'status-rejected': item.status === 'Rechazada'
              }" class="status-chip-micro">
                {{ item.status }}
              </ion-chip>
            </div>
          </div>

          <!-- COLUMNA DERECHA: INFORMACIÓN -->
          <div class="col-request-details">
            <div class="details-header">
              <span class="request-type-text">
                {{ getTypeName(item.idType) }}
              </span>

            </div>

            <p class="request-desc-mini">{{ item.details || 'Sin detalles adicionales.' }}</p>

            <div class="request-meta-mini">
              <ion-icon name="calendar-outline"></ion-icon> {{ item.applicationDate | date:'dd/MM/yy' }}
            </div>
            <div class="buttons-mini">
              <ion-button expand="block" (click)="handleNewItemClick()" class="btn-send-request">

                APROBADA
              </ion-button>
              <ion-button expand="block" (click)="handleNewItemClick()" class="btn-send-request">

                RECHAZADA
              </ion-button>
            </div>
          </div>
        </div>

        <!-- DISEÑO CARD PARA EMPLEADO -->
        <div class="employee-card-content" *ngIf="!canViewAll">
          <div class="request-header">
            <div class="type-info">
              <ion-icon name="document-text-outline" color="primary"></ion-icon>
              <h3>{{ getTypeName(item.idType) }}</h3>
            </div>
            <ion-chip [ngClass]="{
              'status-pending': item.status === 'Pendiente',
              'status-accepted': item.status === 'Aprobada' || item.status === 'Aceptada',
              'status-rejected': item.status === 'Rechazada'
            }">
              {{ item.status }}
            </ion-chip>
          </div>

          <p class="request-details" *ngIf="item.details">{{ item.details }}</p>

          <div class="request-footer">
            <span class="date-info">
              <ion-icon name="time-outline"></ion-icon>
              {{ item.applicationDate | date:'dd/MM/yyyy' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="items.length === 0" class="empty-state">
    <ion-icon name="chatbox-ellipses-outline"></ion-icon>
    <p>No hay {{ title.toLowerCase() }} registradas.</p>
  </div>
</div>