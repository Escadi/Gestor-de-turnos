<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-back-button slot="start" default-href="/home" class="btnBack"></ion-back-button>
        <ion-title>Mi Horario</ion-title>
    </ion-toolbar>
    <ion-progress-bar *ngIf="isLoading" type="indeterminate" color="primary"></ion-progress-bar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
    <div class="schedule-container">

        <ion-card>
            <ion-card-content>
                <!-- Selector de Semana -->
                <div class="week-selector">
                    <ion-button fill="clear" (click)="previousWeek()">
                        <ion-icon name="chevron-back-outline"></ion-icon>
                    </ion-button>
                    <div class="week-info">
                        <h3>Semana {{ weekNumber }}</h3>
                        <p>{{ weekRange }}</p>
                    </div>
                    <ion-button fill="clear" (click)="nextWeek()">
                        <ion-icon name="chevron-forward-outline"></ion-icon>
                    </ion-button>
                </div>
            </ion-card-content>
        </ion-card>

        <!-- Horario de la Semana -->
        <div class="schedule-grid">
            <div class="day-card" *ngFor="let day of weekSchedule">
                <ion-card [class.today]="day.isToday">
                    <ion-card-header>
                        <div class="day-header">
                            <h4>{{ day.dayName }}</h4>
                            <p>{{ day.date }}</p>
                        </div>
                    </ion-card-header>
                    <ion-card-content>
                        <div class="shift-info" *ngIf="day.shift; else noShift">
                            <div class="shift-time">
                                <ion-icon name="time-outline"></ion-icon>
                                <span>{{ day.shift.hours }}</span>
                            </div>
                        </div>
                        <ng-template #noShift>
                            <div class="no-shift">
                                <ion-icon name="calendar-clear-outline"></ion-icon>
                                <p>Descanso</p>
                            </div>
                        </ng-template>
                    </ion-card-content>
                </ion-card>
            </div>
        </div>

        <!-- Resumen Semanal -->
        <ion-card>
            <ion-card-header>
                <ion-card-title>Resumen de la Semana</ion-card-title>
            </ion-card-header>
            <ion-card-content>
                <ion-list lines="none">
                    <ion-item>
                        <ion-icon name="time-outline" slot="start" color="primary"></ion-icon>
                        <ion-label>
                            <p>Total Horas Programadas</p>
                            <h3>{{ totalHours }} horas</h3>
                        </ion-label>
                    </ion-item>
                    <ion-item>
                        <ion-icon name="calendar-outline" slot="start" color="success"></ion-icon>
                        <ion-label>
                            <p>Días Laborables</p>
                            <h3>{{ workDays }} días</h3>
                        </ion-label>
                    </ion-item>
                    <ion-item>
                        <ion-icon name="cafe-outline" slot="start" color="medium"></ion-icon>
                        <ion-label>
                            <p>Días de Descanso</p>
                            <h3>{{ restDays }} días</h3>
                        </ion-label>
                    </ion-item>
                </ion-list>
            </ion-card-content>
        </ion-card>
    </div>
</ion-content>