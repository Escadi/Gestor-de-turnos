<!---------------------------------------------------------------------------------------
  PANTALLA DE AJUSTES DEL TRABAJADOR
  - MUESTRA LA INFORMACIÓN DEL TRABAJADOR
  - PERMITE EDITAR LA INFORMACIÓN DEL TRABAJADOR
---------------------------------------------------------------------------------------->
<div class="ion-page">
  <ion-header class="ion-no-border">
    <ion-toolbar>
      <div style="display: flex; align-items: center; padding-left: 10px;">
        <ion-img src="assets/TimeBeep-logo - clock.png"
          style="width: 30px; height: 30px; margin-right: 10px;"></ion-img>
        <ion-title style="padding: 0;">Mis Ajustes</ion-title>
      </div>
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true">
    <div class="container">
      <!--------------------------------------------------------------------------------------- 
      PERFIL BLOQUE PARTE IZQUIERDA 
      ---------------------------------------------------------------------------------------->
      <ion-card class="profile-card">
        <div class="profile-image">
          <ion-avatar>
            <img alt="Silhouette of a person's head" src="https://ionicframework.com/docs/img/demos/avatar.svg" />
          </ion-avatar>
          <ion-button fill="clear" size="small">
            <ion-icon name="create-outline"></ion-icon>
          </ion-button>
        </div>

        <p class="id">Empleado: {{ worker.id }}</p>
        <h1 class="name">{{ worker.name }} {{ worker.surname }}</h1>
        <p class="role" *ngIf="worker.fuction">{{ worker.fuction.nameCategory }}</p>
        <p class="role" *ngIf="!worker.fuction && worker.idFuction">{{ obtenerNombreFuncion(worker.idFuction) }}</p>


        <ion-chip color="success" *ngIf="worker.status">
          <ion-label>{{ worker.status.name }}</ion-label>
        </ion-chip>
        <ion-chip color="success" *ngIf="!worker.status && worker.idStatus">
          <ion-label>{{ obtenerNombreStatus(worker.idStatus) }}</ion-label>
        </ion-chip>

        <ion-list class="contact-list">
          <ion-item lines="none" *ngIf="worker.dni">
            <ion-icon name="card-outline" slot="start"></ion-icon>
            <ion-label>DNI: {{ worker.dni }}</ion-label>
          </ion-item>

          <ion-item lines="none" *ngIf="worker.phoneNumber">
            <ion-icon name="call-outline" slot="start"></ion-icon>
            <ion-label>{{ worker.phoneNumber }}</ion-label>
          </ion-item>
        </ion-list>
      </ion-card>

      <!--------------------------------------------------------------------------------------- 
      FORMULARIO PRINCIPAL BLOQUE PARTE DERECHA 
      ---------------------------------------------------------------------------------------->
      <ion-card class="form-card">
        <h1>Información Personal</h1>


        <ion-card-content>
          <!--------------------------------------------------------------------------------------- 
          FORMULARIO DE DETALLES DEL TRABAJADOR , SOLTANDO LOS DATOS QUE ESTAN GUARDADOS
          ---------------------------------------------------------------------------------------->
          <div class="form-grid">
            <ion-item>
              <ion-label position="stacked">Nombre</ion-label>
              <ion-input [(ngModel)]="worker.name" [disabled]="!canViewSubordinates"></ion-input>
            </ion-item>

            <ion-item>
              <ion-label position="stacked">Apellidos</ion-label>
              <ion-input [(ngModel)]="worker.surname" [disabled]="!canViewSubordinates"></ion-input>
            </ion-item>


            <ion-item>
              <ion-label position="stacked">DNI</ion-label>
              <ion-input [(ngModel)]="worker.dni" [disabled]="!canViewSubordinates"></ion-input>
            </ion-item>

            <ion-item>
              <ion-label position="stacked">Teléfono</ion-label>
              <ion-input [(ngModel)]="worker.phoneNumber" [disabled]="!canViewSubordinates"></ion-input>
            </ion-item>



            <ion-item>
              <ion-label position="stacked">Función</ion-label>
              <ion-select [(ngModel)]="worker.idFuction" placeholder="Selecciona una función"
                [disabled]="!canViewSubordinates">
                <ion-select-option *ngFor="let func of filteredFunctions" [value]="func.id">
                  {{ func.name }}
                </ion-select-option>
              </ion-select>
            </ion-item>
          </div>
        </ion-card-content>
        <!--------------------------------------------------------------------------------------- 
        BOTON DE GUARDAR CAMBIOS
        ---------------------------------------------------------------------------------------->
        <div class="headerButtons">
          <ion-buttons slot="end">
            <ion-button class="saveChange" *ngIf="canViewSubordinates">
              <ion-icon name="save-outline"></ion-icon>
              Guardar Cambios</ion-button>
          </ion-buttons>

        </div>
      </ion-card>

    </div>
  </ion-content>
</div>