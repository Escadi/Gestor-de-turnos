<ion-header class="ion-no-border">
  <ion-toolbar>
    <div style="display: flex; align-items: center; padding-left: 10px;">
      <ion-img src="assets/TimeBeep-logo - clock.png" style="width: 30px; height: 30px; margin-right: 10px;"></ion-img>
      <ion-title style="padding: 0;">Mi Horario</ion-title>
    </div>
  </ion-toolbar>
  <ion-progress-bar *ngIf="isLoading" type="indeterminate" color="primary"></ion-progress-bar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="schedule-container">

    <ion-card>
      <ion-card-content>
        <!------------------------------------------------------------------------------------------------------
        SELECTOR DE LA SEMANA
        ------------------------------------------------------------------------------------------------------>
        <div class="week-selector">
          <ion-button fill="clear" (click)="previousWeek()">
            <ion-icon name="chevron-back-outline"></ion-icon>
          </ion-button>
          <div class="week-info">
            <p>{{ weekRange }}</p>
          </div>
          <ion-button fill="clear" (click)="nextWeek()">
            <ion-icon name="chevron-forward-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <!------------------------------------------------------------------------------------------------------
    HORARIO DE LA SEMANA
    ------------------------------------------------------------------------------------------------------>
    <div class="schedule-grid">
      <div class="day-card" *ngFor="let day of weekSchedule">
        <ion-card [class.today]="day.isToday">
          <ion-card-header>
            <div class="day-header">
              <h4>{{ day.dayName }}</h4>
              <p>{{ day.date }}</p>
            </div>
          </ion-card-header>
          <ion-card-content>
            <div class="shift-info" *ngIf="day.shift; else noShift">
              <div class="shift-time">
                <ion-icon name="time-outline"></ion-icon>
                <span>{{ day.shift.hours }}</span>
              </div>
            </div>
            <ng-template #noShift>
              <div class="no-shift">
                <ion-icon name="calendar-clear-outline"></ion-icon>
                <p>Descanso</p>
              </div>
            </ng-template>
          </ion-card-content>
        </ion-card>
      </div>
    </div>

    <!------------------------------------------------------------------------------------------------------
    RESUMEN SEMANAL
    ------------------------------------------------------------------------------------------------------>
    <ion-card>
      <ion-card-header>
        <ion-card-title>Saldo de la Gestión de Tiempo</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="none">
          <ion-item>
            <ion-icon name="time-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <p>Tiempo de vacaciones disfrutadas</p>
              <h3>{{ totalVacationHours }} / 30 días</h3>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="calendar-outline" slot="start" color="success"></ion-icon>
            <ion-label>
              <p>Tiempo festivos disfrutados</p>
              <h3>{{ totalHolidayHours }} / 18 días</h3>
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="cafe-outline" slot="start" color="medium"></ion-icon>
            <ion-label>
              <p>Días Debidos pendientes</p>
              <h3>{{ totalDebtHours }} días</h3>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>